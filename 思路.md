## 项目Note:


#### 数据说明：

**训练集是基于0101-0227预测0228-0306的点击数据；预测集是基于0108-0306预测0307-0313的点击数据**
- 1. 考虑的特征包括：用户的基本信息【gender、age、aum227、aum306】+交易信息【sz_amt、expend、income、cat1、cat2、g2_cod】
- 2. 衍生特征：sz_amt、expend、income表示给定时间内的交易总额、收入、支出
- 3. 对于离散变量【gender、cat1、cat2、g2_cod】，gender表征过程使用one-hot，cat1、cat2、g2_cod计算给定时间内用户交易数据对应对值出现的频数和金额均值，其中cat1有3个离散取值、cat2有59个离散取值、gender有2个离散取值、g2_cod有365个离散值、外加特征age、aum、sz_amt、expend、income，因此模型使用对特征总数为850个.
*注意：训练集使用的时间区间为prt_dt<='2019-02-27', 预测集使用的时间区间为prt_dt<='2019-03-06'，开始日期为'2019-01-01',训练集使用对剩余资金为aum227，预测集使用对剩余金额为aum306


#### 数据预处理

**1. 缺失值处理**
- 统计分析发现，数据存在缺失值表示为:'\\N',对缺失值对处理分为两种：
（1）用特征的众数对age和gender进行填充；
（2）使用均值对aum227和aum306填充
**2. 特征抽取与衍生**
- 除使用用户基础特征外，在给定时间区间下对用户交易数据进行特征抽取和衍生新特征。
基于交易数据抽取和衍生对特征有：【cat1、cat2、g2_cod】离散变量对应的频数和交易金额的均值以及【sz_amt、expend、income】连续变量。
**3. 离散变量连续化**
- 将性别离散为0-1变量【one-hot表征】，计算cat1、cat2、g2_cod给定时间内用户交易数据对应对值出现的频数以及金额的均值
**4. 归一化 **
- 将所有特征表征为向量后，需对其按特征进行归一化
**5.特征选择**
- 基于树模型对特征进行降维处理，选择树模型是由于后期的算法也是基于分类回归树(CART)进行，基于树计算模型信息增益从而达到特征选择的目的。
*注意：目前实验进行特征选择后的模型识别效果不如未进行特征选择的模型。

#### 模型训练
本次竞赛首选在业界使用最为广泛的xgboost进行模型训练，与此同时，还选择了基础的机器学习算法【逻辑回归、随机树林、贝叶斯分类、提升树、感知器、支持向量机】进行对比，对比结果：xgboost的模型效果更好。
xgboost模型参数实验：
params={'booster':'gbtree',
    'objective': 'binary:logistic',
    'eval_metric': 'auc',
    'max_depth':5,
    'lambda':1,
    'subsample':0.85,
    'colsample_bytree':0.85,
    'min_child_weight':2,
    'eta': 0.025,
    'seed':0}
1. 迭代200次， eta=0.025， max_depth=5, 未做特征选择，训练集初始auc=0.666265，测试集auc=0.65
2. 迭代200次， eta=0.025， max_depth=5, 做特征选择，训练集初始auc=0.67，测试集auc=0.65
可以不做特征选择